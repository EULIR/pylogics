start: pltlf_formula

?pltlf_formula:     pltlf_equivalence
?pltlf_equivalence: pltlf_implication (EQUIVALENCE pltlf_implication)*
?pltlf_implication: pltlf_or (IMPLY pltlf_or)*
?pltlf_or:          pltlf_and (OR pltlf_and)*
?pltlf_and:         pltlf_since (AND pltlf_since)*
?pltlf_since:       pltlf_unaryop (SINCE pltlf_unaryop)*

?pltlf_unaryop:    pltlf_historically
             |     pltlf_once
             |     pltlf_before
             |     pltlf_not
             |     pltlf_wrapped

?pltlf_historically: HISTORICALLY pltlf_unaryop
?pltlf_once:         ONCE pltlf_unaryop
?pltlf_before:       BEFORE pltlf_unaryop
?pltlf_not:          NOT pltlf_unaryop
?pltlf_wrapped:      pltlf_atom
             |       LSEPARATOR pltlf_formula RSEPARATOR
?pltlf_atom:       pltlf_symbol
           |       pltlf_true
           |       pltlf_false
           |       pltlf_start

pltlf_symbol: SYMBOL_NAME
pltlf_true: prop_true
pltlf_false: prop_false
pltlf_start: START

// Operators must not be part of a word
SINCE.2: /(?<=\W)S(?=[^a-zA-Z])/
HISTORICALLY.2: /(?<=^|\W)H(?=[^a-zA-Z])|^H(?=[^a-zA-Z])/
ONCE.2: /(?<=^|\W)O(?=[^a-zA-Z])|^O(?=[^a-zA-Z])/
BEFORE.2: /(?<=^|\W)Y(?=[^a-zA-Z])|^Y(?=[^a-zA-Z])/
START.2: /(?i:start)/

%ignore /\s+/

%import .propositional.SYMBOL_NAME -> SYMBOL_NAME
%import .propositional.prop_true -> prop_true
%import .propositional.prop_false -> prop_false
%import .propositional.NOT -> NOT
%import .propositional.OR -> OR
%import .propositional.AND -> AND
%import .propositional.EQUIVALENCE -> EQUIVALENCE
%import .propositional.IMPLY -> IMPLY
%import .propositional.LSEPARATOR -> LSEPARATOR
%import .propositional.RSEPARATOR -> RSEPARATOR